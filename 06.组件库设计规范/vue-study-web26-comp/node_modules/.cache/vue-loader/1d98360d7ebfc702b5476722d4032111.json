{"remainingRequest":"/Users/linhao/Desktop/vue/practice-vue/06.组件库设计规范/vue-study-web26-comp/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/linhao/Desktop/vue/practice-vue/06.组件库设计规范/vue-study-web26-comp/src/components/form/KFormItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/linhao/Desktop/vue/practice-vue/06.组件库设计规范/vue-study-web26-comp/src/components/form/KFormItem.vue","mtime":1610715232082},{"path":"/Users/linhao/Desktop/vue/practice-vue/06.组件库设计规范/vue-study-web26-comp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/linhao/Desktop/vue/practice-vue/06.组件库设计规范/vue-study-web26-comp/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/linhao/Desktop/vue/practice-vue/06.组件库设计规范/vue-study-web26-comp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/linhao/Desktop/vue/practice-vue/06.组件库设计规范/vue-study-web26-comp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWYWxpZGF0b3IgZnJvbSAnYXN5bmMtdmFsaWRhdG9yJwoKZXhwb3J0IGRlZmF1bHQgewogIGluamVjdDogWydmb3JtJ10sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVycm9yOiAnJwogICAgfQogIH0sCiAgcHJvcHM6IHsKICAgIGxhYmVsOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0sCiAgICBwcm9wOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0KICB9LAogIG1vdW50ZWQgKCkgewogICAgLy8gS2lucHV05bey5oyC6L2977yM5Y+v5Lul55uR5ZCs5qCh6aqM5LqL5Lu2CiAgICB0aGlzLiRvbigndmFsaWRhdGUnLCAoKSA9PiB7CiAgICAgIHRoaXMudmFsaWRhdGUoKQogICAgfSkKICB9LAogIG1ldGhvZHM6IHsKICAgIHZhbGlkYXRlKCkgewogICAgICAvLyDojrflj5bmoKHpqozop4TliJkKICAgICAgY29uc3QgcnVsZXMgPSB0aGlzLmZvcm0ucnVsZXNbdGhpcy5wcm9wXQogICAgICAvLyDlvZPliY3lgLwKICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmZvcm0ubW9kZWxbdGhpcy5wcm9wXQogICAgICAKICAgICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IFZhbGlkYXRvcih7W3RoaXMucHJvcF06IHJ1bGVzfSkKCiAgICAgIC8vIOaJp+ihjOagoemqjAogICAgICByZXR1cm4gdmFsaWRhdG9yLnZhbGlkYXRlKHtbdGhpcy5wcm9wXTogdmFsdWV9LCBlcnJvcnMgPT4gewogICAgICAgIGlmIChlcnJvcnMpIHsKICAgICAgICAgIC8vIOaYvuekuumUmeivr+S/oeaBrwogICAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yc1swXS5tZXNzYWdlCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIOagoemqjOmAmui/h+a4hemZpOmUmeivrwogICAgICAgICAgdGhpcy5lcnJvciA9ICcnCiAgICAgICAgfQogICAgICB9KQogICAgfQogIH0sCn0K"},{"version":3,"sources":["KFormItem.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"KFormItem.vue","sourceRoot":"src/components/form","sourcesContent":["<template>\n  <div>\n    <!-- 1.label -->\n    <label v-if=\"label\">{{label}}</label>\n    <!-- 2.内部内容 -->\n    <slot></slot>\n    <!-- 3.校验结果 -->\n    <p v-if=\"error\">{{error}}</p>\n    <p>{{form.rules[this.prop]}}</p>\n  </div>\n</template>\n\n<script>\n  import Validator from 'async-validator'\n\n  export default {\n    inject: ['form'],\n    data() {\n      return {\n        error: ''\n      }\n    },\n    props: {\n      label: {\n        type: String,\n        default: ''\n      },\n      prop: {\n        type: String,\n        default: ''\n      }\n    },\n    mounted () {\n      // Kinput已挂载，可以监听校验事件\n      this.$on('validate', () => {\n        this.validate()\n      })\n    },\n    methods: {\n      validate() {\n        // 获取校验规则\n        const rules = this.form.rules[this.prop]\n        // 当前值\n        const value = this.form.model[this.prop]\n        \n        const validator = new Validator({[this.prop]: rules})\n\n        // 执行校验\n        return validator.validate({[this.prop]: value}, errors => {\n          if (errors) {\n            // 显示错误信息\n            this.error = errors[0].message\n          } else {\n            // 校验通过清除错误\n            this.error = ''\n          }\n        })\n      }\n    },\n  }\n</script>\n\n<style scoped>\n\n</style>"]}]}